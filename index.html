<!-- FILE: menu.html -->
<input class="search" placeholder="Search for dishes or restaurants" id="search" />


<main>
<div class="grid" id="menuGrid"></div>
</main>


<div class="cart-pill" id="openCart">View cart (<span id="cartCount">0</span>)</div>


<script>
// Demo menu data
const menu = [
{id:1,title:'Margherita Pizza',desc:'Tomato, mozzarella, basil',price:6.99},
{id:2,title:'Veggie Burger',desc:'Grilled patty, lettuce, tomato',price:5.49},
{id:3,title:'Caesar Salad',desc:'Crisp romaine, parmesan, dressing',price:4.25},
{id:4,title:'Chicken Biryani',desc:'Fragrant rice and spiced chicken',price:8.99},
{id:5,title:'Paneer Wrap',desc:'Indian paneer with chutney',price:4.99},
{id:6,title:'Chocolate Brownie',desc:'Warm, fudgy brownie',price:2.75}
];


function getCart(){return JSON.parse(localStorage.getItem('fd_cart')||'[]')}
function setCart(c){localStorage.setItem('fd_cart', JSON.stringify(c)); updateCartCount()}
function updateCartCount(){document.getElementById('cartCount').innerText = getCart().reduce((s,i)=>s+i.qty,0)}


function render(){
const grid = document.getElementById('menuGrid'); grid.innerHTML='';
const q = document.getElementById('search').value.toLowerCase();
menu.filter(it=> (it.title+it.desc).toLowerCase().includes(q)).forEach(it=>{
const card = document.createElement('div'); card.className='card';
card.innerHTML = `\n <div class=\"item-img\">üçΩÔ∏è</div>\n <div class=\"item-title\">${it.title}</div>\n <div class=\"item-desc\">${it.desc}</div>\n <div class=\"price-row\">\n <div style=\"font-weight:700\">$${it.price.toFixed(2)}</div>\n <div>\n <button class=\"btn mini\" data-id=\"${it.id}\">Add</button>\n </div>\n </div>`;
grid.appendChild(card);
})
}


document.addEventListener('click', e=>{
if(e.target.matches('.btn')){
const id = Number(e.target.dataset.id);
const item = menu.find(m=>m.id===id);
const cart = getCart();
const found = cart.find(c=>c.id===id);
if(found) found.qty += 1; else cart.push({id:item.id,title:item.title,price:item.price,qty:1});
setCart(cart);
// small feedback
e.target.innerText = 'Added'; setTimeout(()=>e.target.innerText='Add',700);
}
});


document.getElementById('openCart').addEventListener('click', ()=> location.href='cart.html');
document.getElementById('search').addEventListener('input', render);


// show user
const user = JSON.parse(localStorage.getItem('fd_user')||'null');
if(!user){location.href='login.html'}
document.getElementById('greetings').innerText = user ? `Hi, ${user.name}` : '';
document.getElementById('logout').addEventListener('click', ()=>{localStorage.removeItem('fd_user'); location.href='login.html'});


render(); updateCartCount();
</script>
</body>
</html>
